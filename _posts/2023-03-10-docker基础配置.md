---
categories: other
title: docker基础配置
# modified_date: yyyy-mm-dd
author: Han Shu
---

# 启动dockers
可以通过以下指令启动一个带有gpu的container
``` bash
docker run -itd --gpus all --name container_name -e NVIDIA_DRIVER_CAPABILITIES=compute,utility -e NVIDIA_VISIBLE_DEVICES=all continuumio/anaconda3
```

# 在docker中设置git代理
在docker中不能使用`localhost`或`127.0.0.1`指明宿主机，需要使用`host.docker.internal`
``` bash
git config --global http.proxy http://host.docker.internal:7890
git config --global https.proxy https://host.docker.internal:7890
```

# 更换conda/pypi源
[conda清华源](https://mirror.tuna.tsinghua.edu.cn/help/anaconda/)  
[pypi清华源](https://mirror.tuna.tsinghua.edu.cn/help/pypi/)  

# conda安装应用
使用以下指令激活conda  
``` bash
conda init
```  
使用以下指令创建环境  
``` bash
conda create -n env_name python=python_version
```  
安装R, jupyter  
``` bash
conda install R jupyter jupyterlab
```  

[安装pytorch](https://pytorch.org/get-started/locally/)  
[安装pyg](https://pytorch-geometric.readthedocs.io/en/latest/install/installation.html)    
[安装dgl](https://www.dgl.ai/pages/start.html)  

# 保存docker镜像
首先需要commit一个container  
``` bash
docker commit container_id name/img_name:tag
```  
然后保存镜像即可  
``` bash
docker save name/img_name:tag -o path_to_save
```
